<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Convenio com Sebrae e cenário financeiro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals (Stone, Gray, Sky Blue) -->
    <!-- Application Structure Plan: A tab-based single-page dashboard. Sections: Visão Geral (key metrics), Plano de Trabalho (budget changes chart), Análise Financeira (expense & cash flow charts), and Conclusões. This structure provides a high-level overview first, then allows users to explore specific areas, which is more intuitive and efficient than a linear presentation. -->
    <!-- Visualization & Content Choices: 1. Total Budget: Bar chart (Goal: Compare old/new, Interaction: Hover, Justification: Clear visual of reduction, Lib: Chart.js). 2. Monthly Expenses: Detailed HTML table (Goal: Compare with/without agreement, Justification: Provides granular detail requested by user, Lib: HTML/Tailwind). 3. Cash Flow: Combo Bar/Line chart (Goal: Show trend, Interaction: Hover, Justification: Best for comparing different data types over time, Lib: Chart.js). 4. Key Metrics: Styled cards (Goal: Inform, Justification: Quick-glance info, Lib: HTML/Tailwind). -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 50vh;
        }
        .nav-btn {
            transition: all 0.3s ease;
        }
        .nav-btn.active {
            background-color: #0284c7; /* sky-600 */
            color: white;
            border-color: #0284c7; /* sky-600 */
        }
        .nav-btn:not(.active):hover {
            background-color: #f1f5f9; /* slate-100 */
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .kpi-card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            text-align: center;
        }
        .kpi-title {
            color: #475569; /* slate-600 */
            font-size: 1rem;
            font-weight: 500;
        }
        .kpi-value {
            color: #0f172a; /* slate-900 */
            font-size: 2.25rem;
            font-weight: 700;
            margin-top: 0.5rem;
        }
        .kpi-value.negative {
            color: #dc2626; /* red-600 */
        }
        .kpi-value.positive {
            color: #16a34a; /* green-600 */
        }
        table thead th {
            background-color: #f1f5f9; /* slate-100 */
        }
    </style>
</head>
<body class="text-slate-800">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-slate-900">Readequação do Plano de Trabalho do Convênio com o Sebrae e Cenário Financeiro de 2025</h1>
            <p class="text-slate-600 mt-2">Análise do convênio com o Sebrae e projeções para 2025</p>
        </header>

        <nav class="flex justify-center border-b border-slate-200 mb-8">
            <div class="flex flex-wrap justify-center gap-2 md:gap-4">
                <button id="nav-overview" class="nav-btn active text-sm md:text-base font-medium py-2 px-4 rounded-t-lg border-b-2 border-transparent">Visão Geral</button>
                <button id="nav-plan" class="nav-btn text-sm md:text-base font-medium py-2 px-4 rounded-t-lg border-b-2 border-transparent">Plano de Trabalho</button>
                <button id="nav-analysis" class="nav-btn text-sm md:text-base font-medium py-2 px-4 rounded-t-lg border-b-2 border-transparent">Análise Financeira</button>
                <button id="nav-conclusion" class="nav-btn text-sm md:text-base font-medium py-2 px-4 rounded-t-lg border-b-2 border-transparent">Conclusões</button>
            </div>
        </nav>

        <main>
            <!-- Visão Geral Section -->
            <section id="content-overview" class="content-section active">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-semibold text-slate-800">Visão Geral</h2>
                    <p class="text-slate-500 mt-1">Os principais números que resumem o cenário financeiro.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="kpi-card">
                        <h3 class="kpi-title">Redução Total do Convênio</h3>
                        <p id="kpi-reduction" class="kpi-value negative"></p>
                    </div>
                    <div class="kpi-card">
                        <h3 class="kpi-title">Novo Valor Total do Convênio</h3>
                        <p id="kpi-new-total" class="kpi-value"></p>
                    </div>
                    <div class="kpi-card">
                        <h3 class="kpi-title">Redução Custo Mensal do Fórum</h3>
                        <p id="kpi-monthly-reduction" class="kpi-value positive"></p>
                    </div>
                </div>
            </section>

            <!-- Plano de Trabalho Section -->
            <section id="content-plan" class="content-section">
                 <div class="text-center mb-8">
                    <h2 class="text-2xl font-semibold text-slate-800">Alterações no Plano de Trabalho</h2>
                    <p class="text-slate-500 mt-1">Mudanças orçamentárias e detalhamento das metas afetadas.</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md mb-8">
                    <h3 class="text-xl font-semibold text-center mb-4">Comparativo do Orçamento Total</h3>
                    <div class="chart-container" style="height:300px;">
                        <canvas id="budgetChart"></canvas>
                    </div>
                </div>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-semibold mb-4">Principais Reduções</h3>
                        <ul class="space-y-4">
                            <li>
                                <strong class="text-red-600">Meta 11 Removida:</strong>
                                <p class="text-sm text-slate-600">"Realizar eventos estratégicos que promovam os produtos industrializados de origem acreana, valorizando sua qualidade, origem, sustentabilidade e identidade cultural"</p>
                                <p class="font-semibold">- R$ 225.000,00</p>
                            </li>
                             <li>
                                <strong class="text-red-600">Meta 7 Reduzida:</strong>
                                <p class="text-sm text-slate-600">"Criar campanhas de marketing para divulgar os produtos acreanos, destacando seus diferenciais, como a qualidade, a origem e a sustentabilidade"</p>
                                Despesa "Divulgação, anúncio, publicidade e propaganda": redução de 18 para 8 meses
                                <p class="font-semibold">- R$ 249.280,00</p>
                            </li>
                        </ul>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-semibold mb-4">Valores Redistribuídos</h3>
                        <ul class="space-y-2 text-sm text-slate-700">
                            <li><strong>Meta 1:</strong> + R$ 2.450,00</li>
                            <li><strong>Meta 2:</strong> + R$ 300,00</li>
                            <li><strong>Meta 4:</strong> + R$ 9.800,00</li>
                            <li><strong>Meta 5:</strong> + R$ 1.350,00</li>
                            <li><strong>Meta 6:</strong> + R$ 9.000,00</li>
                            <li><strong>Meta 8:</strong> + R$ 900,00</li>
                            <li><strong>Meta 9:</strong> + R$ 45.900,00</li>
                            <li><strong>Meta 10:</strong> + R$ 25.160,00</li>
                            <li class="font-bold pt-2 border-t mt-2"><strong>Total Redistribuído:</strong> R$ 94.860,00</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Análise Financeira Section -->
            <section id="content-analysis" class="content-section">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-semibold text-slate-800">Análise Financeira</h2>
                    <p class="text-slate-500 mt-1">Custos mensais com e sem convênios e projeções de saldo</p>
                </div>
                <div class="bg-white p-4 sm:p-6 rounded-lg shadow-md mb-8">
                    <h3 class="text-xl font-semibold text-center mb-4">Despesas Mensais do Fórum</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm text-left">
                            <thead class="text-xs text-slate-700 uppercase">
                                <tr>
                                    <th scope="col" class="px-4 py-3">Descrição da Despesa</th>
                                    <th scope="col" class="px-4 py-3 text-right">Custo Com Convênios</th>
                                    <th scope="col" class="px-4 py-3 text-right">Custo Sem Convênios</th>
                                </tr>
                            </thead>
                            <tbody id="expense-table-body">
                                <!-- Rows will be injected by JavaScript -->
                            </tbody>
                            <tfoot class="font-semibold text-slate-800">
                                <tr class="border-t-2">
                                    <td class="px-4 py-3">Total Geral Mensal</td>
                                    <td id="total-with-agreement" class="px-4 py-3 text-right"></td>
                                    <td id="total-without-agreement" class="px-4 py-3 text-right"></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    <div class="mt-4 p-4 bg-sky-100 border-l-4 border-sky-500 rounded-r-lg">
                        <p class="text-lg font-semibold text-sky-800">
                            Redução Mensal de Custo: <span id="monthly-savings" class="font-bold"></span>
                        </p>
                        <p class="text-sm text-sky-700">O convênio resulta em uma economia significativa, reduzindo o custo operacional do Fórum.</p>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-center mb-4">Projeção de Fluxo de Caixa (Ago-Dez 2025)</h3>
                    <div class="chart-container" style="height:350px;">
                        <canvas id="cashflowChart"></canvas>
                    </div>
                    <div class="mt-6 p-4 bg-red-100 border-l-4 border-red-500 rounded-r-lg">
                        <p class="text-lg font-semibold text-red-800">
                            Aporte ao Convênio: <span class="font-bold">- R$ 50.000,00</span>
                        </p>
                        <p class="text-sm text-red-700">Esse aporte do Fórum ao convênio deve ser realizado em novembro.</p>
                    </div>
                </div>
            </section>

            <!-- Conclusões Section -->
            <section id="content-conclusion" class="content-section">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-semibold text-slate-800">Análise e Conclusões</h2>
                    <p class="text-slate-500 mt-1">Principais pontos</p>
                </div>
                <div class="max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold mb-4">Fluxo de Caixa</h3>
                    <ul class="list-disc list-inside space-y-2 text-slate-700">
                        <li>O fluxo de caixa torna-se criticamente negativo em novembro devido à despesa de aporte de R$ 50.000,00 neste pior cenário em que nenhum contrato DEL é renovado.</li>
                        <li>O déficit de novembro (<span class="font-semibold text-red-600">-R$ 48.923</span>) somado ao déficit de dezembro (<span class="font-semibold text-red-600">-R$ 7.323</span>) cria uma necessidade de caixa urgente para o final do ano.</li>
                        <li><strong class="text-red-600">Risco Financeiro:</strong> O aporte cria um déficit substancial.</li>
                    </ul>

                    <h3 class="text-xl font-semibold mt-6 mb-4">Conclusões</h3>
                    <ol class="list-decimal list-inside space-y-2 text-slate-700">
                        <li><strong>Cortes:</strong> A readequação do plano de trabalho gerou uma redução total de R$ 379.420,00.</li>
                        <li><strong>Custo mensal:</strong> O novo custo operacional de R$ 44.823,00 é coberto pelas receitas nos primeiros meses, mas insuficiente para cobrir as despesas extraordinárias.</li>
                        <li><strong>Ações Necessárias:</strong> É crucial trabalhar na renegociação dos contratos e renovação do DEL Turismo com os atuais municípios parceiros.</li>
                    </ol>
                </div>
            </section>
        </main>
    </div>

    <script>
        const formatCurrency = (value) => {
            return new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(value);
        };

        const data = {
            initialTotal: 2669600,
            newTotal: 2290180,
            totalReduction: -379420,
            detailedExpenses: [
                { label: 'Equipe Fórum (Stefani Diferença)', withAgreement: 1400, withoutAgreement: 37379.30 },
                { label: 'Consultor DEL - Contrato e Diária', withAgreement: 29800, withoutAgreement: 29800 },
                { label: 'Passagem Estácio DEL Acre', withAgreement: 3000, withoutAgreement: 3000 },
                { label: 'Passagem Estácio DEL Amapá', withAgreement: 2500, withoutAgreement: 2500 },
                { label: 'Contador', withAgreement: 1300, withoutAgreement: 1300 },
                { label: 'ISS', withAgreement: 800, withoutAgreement: 800 },
                { label: 'Limpeza, Energia, Telefone e Internet', withAgreement: 1864, withoutAgreement: 1864 },
                { label: 'Locação Sala', withAgreement: 2650, withoutAgreement: 2650 },
                { label: 'Fundo Fixo', withAgreement: 759, withoutAgreement: 759 },
                { label: 'Taxa Bancária', withAgreement: 150, withoutAgreement: 150 },
                { label: 'Material de Expediente e Outros', withAgreement: 600, withoutAgreement: 600 },
            ],
            cashflow: {
                labels: ['Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
                revenues: [72980, 62900, 62900, 45900, 37500],
                expenses: [44823, 44823, 44823, 94823, 44823], // Expense in Nov = 44823 + 50000
                balances: [28157, 18077, 18077, -48923, -7323] // Nov balance: 45900 - 94823
            }
        };
        
        const totalWithAgreement = data.detailedExpenses.reduce((sum, item) => sum + item.withAgreement, 0);
        const totalWithoutAgreement = data.detailedExpenses.reduce((sum, item) => sum + item.withoutAgreement, 0);
        const monthlySavings = totalWithoutAgreement - totalWithAgreement;

        document.addEventListener('DOMContentLoaded', () => {
            
            document.getElementById('kpi-reduction').textContent = formatCurrency(data.totalReduction);
            document.getElementById('kpi-new-total').textContent = formatCurrency(data.newTotal);
            document.getElementById('kpi-monthly-reduction').textContent = formatCurrency(monthlySavings);
            
            const expenseTableBody = document.getElementById('expense-table-body');
            data.detailedExpenses.forEach(item => {
                const row = document.createElement('tr');
                row.className = 'border-b';
                row.innerHTML = `
                    <td class="px-4 py-2">${item.label}</td>
                    <td class="px-4 py-2 text-right">${formatCurrency(item.withAgreement)}</td>
                    <td class="px-4 py-2 text-right text-slate-500">${formatCurrency(item.withoutAgreement)}</td>
                `;
                expenseTableBody.appendChild(row);
            });

            document.getElementById('total-with-agreement').textContent = formatCurrency(totalWithAgreement);
            document.getElementById('total-without-agreement').textContent = formatCurrency(totalWithoutAgreement);
            document.getElementById('monthly-savings').textContent = formatCurrency(monthlySavings);


            const navButtons = document.querySelectorAll('.nav-btn');
            const contentSections = document.querySelectorAll('.content-section');

            const switchTab = (tabId) => {
                navButtons.forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.id === `nav-${tabId}`) {
                        btn.classList.add('active');
                    }
                });
                contentSections.forEach(section => {
                    section.classList.remove('active');
                    if (section.id === `content-${tabId}`) {
                        section.classList.add('active');
                    }
                });
            };

            navButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    const tabId = e.target.id.replace('nav-', '');
                    switchTab(tabId);
                });
            });
            
            const tooltipCurrency = {
                callbacks: {
                    label: function(context) {
                        let label = context.dataset.label || '';
                        if (label) {
                            label += ': ';
                        }
                        if (context.parsed.y !== null) {
                            label += formatCurrency(context.parsed.y);
                        }
                        return label;
                    }
                }
            };

            const budgetCtx = document.getElementById('budgetChart').getContext('2d');
            new Chart(budgetCtx, {
                type: 'bar',
                data: {
                    labels: ['Orçamento Total'],
                    datasets: [
                        {
                            label: 'Valor Inicial',
                            data: [data.initialTotal],
                            backgroundColor: '#94a3b8', // slate-400
                            borderColor: '#64748b', // slate-500
                            borderWidth: 1
                        },
                        {
                            label: 'Valor Atual',
                            data: [data.newTotal],
                            backgroundColor: '#38bdf8', // sky-400
                            borderColor: '#0ea5e9', // sky-500
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: value => formatCurrency(value)
                            }
                        }
                    },
                    plugins: {
                        legend: { position: 'top' },
                        tooltip: tooltipCurrency
                    }
                }
            });

            const cashflowCtx = document.getElementById('cashflowChart').getContext('2d');
            new Chart(cashflowCtx, {
                type: 'bar',
                data: {
                    labels: data.cashflow.labels,
                    datasets: [
                        {
                            label: 'Receitas Previstas',
                            data: data.cashflow.revenues,
                            backgroundColor: '#38bdf8', // sky-400
                        },
                        {
                            label: 'Saldo Mensal',
                            data: data.cashflow.balances,
                            backgroundColor: (context) => {
                                const value = context.dataset.data[context.dataIndex];
                                return value >= 0 ? '#4ade80' : '#f87171'; // green-400 or red-400
                            },
                        },
                         {
                            label: 'Despesas Mensais',
                            data: data.cashflow.expenses,
                            type: 'line',
                            borderColor: '#f43f5e', // rose-500
                            backgroundColor: '#f43f5e',
                            tension: 0.1,
                            borderWidth: 2,
                            pointRadius: 3,
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            ticks: {
                                callback: value => formatCurrency(value)
                            }
                        }
                    },
                    plugins: {
                        legend: { position: 'top' },
                        tooltip: tooltipCurrency
                    }
                }
            });

        });
    </script>
</body>
</html>
